<html>

<head></head>

<body>
    <button onclick="wave.play()">Play</button>
    <button onclick="ripple()">Ripple</button>
    <div id="chart-container" style="width: 100%; height: 100%;"></div>
    <!-- <script src="../dist/circular-audio-wave.min.js"></script> -->

    <!-- remove these later -->
    <script src="../lib/echarts_4.0.2.min.js"></script>
    <script src="../src/js/circular-audio-wave.js"></script>

    <script>
        //let wave = new CircularAudioWave(document.getElementById('chart-container'), {loop: true});
        let wave = new CircularAudioWave(document.getElementById('chart-container'));
        wave.loadAudio('audio/audio1.mp3');

        let rippleLevel = 0;
        function ripple() {
            let rippleData = Array.apply(null, { length: 361 }).map(Function.call, function (i) {
                let r;
                switch (rippleLevel) {
                    case 0:
                        r = 100;
                        break;
                    case 1:
                        r = 120;
                        break;
                    case 2:
                        r = 140;
                        break;
                    case 3:
                        r = 160;
                        break;
                }
                return [r, i];
            });
            rippleLevel++;
            if (rippleLevel === 4) {
                rippleLevel = 0;
                option.series[1].data = [];
            }
            //rippleData = rippleData.slice(1, rippleData.length);
            // if (option.series[1].data.length) {
            //     option.series[1].data[option.series[1].data.length - 1] = null;
            // }
            option.series[1].data = option.series[1].data.concat(rippleData);

            chart.setOption(option);
        }


    </script>
</body>

</html>